---
date: 2024-12-11
title: 配置 SSH 长连接
icon: install
order: 1
category: ssh
tag: ssh
---

SSH（Secure Shell）是一种安全的远程登录协议。配置 SSH 长连接可以实现免密登录，提高开发和运维效率，同时减少频繁输入密码的烦恼。

## 配置步骤

### 第一步：在客户端生成 SSH 公私钥

在本地客户端生成一对 SSH 公私钥文件：

```bash
ssh-keygen
```

-   按提示一路回车，采用默认设置。

-   执行后将在用户目录的 `~/.ssh` 文件夹下生成以下两个文件：

    -   `id_rsa`: 私钥文件，请妥善保管。
    -   `id_rsa.pub`: 公钥文件，用于配置到服务器。

检查生成的文件：

```bash
cd ~/.ssh
ls
```

### 第二步：将公钥上传到服务器

将生成的公钥文件上传到远程服务器的 `authorized_keys` 文件中。

假设服务器地址为 `192.168.235.22`，用户名为 `root`，执行以下命令：

**注意：**  
`~/.ssh/id_rsa.pub` 是本地公钥的默认路径，但每台电脑的路径可能有所不同。请根据第一步生成的文件位置确认并替换为正确的路径。例如，如果生成的公钥存储在其他位置，请修改命令中的路径：

```bash
ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.235.22
```

上传后，你可以在服务器中查看 `~/.ssh/authorized_keys` 文件，验证公钥是否写入成功：

```bash
ssh root@192.168.235.22
cd ~/.ssh
cat authorized_keys
```

### 第三步：测试免密登录

上传成功后，尝试使用以下命令登录服务器，无需再输入密码：

```bash
ssh root@192.168.235.22
```

如果登录成功，说明 SSH 长连接配置完成！